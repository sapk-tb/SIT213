<html>
    <head>
	<title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" ></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/4.1.9/highcharts.js" ></script>
    </head>
    <body>
	<h1>RÃ©sultats de la simulation</h1>
	<br>
	<h2>TEB en fonction du SNR</h2>
	<center>	<canvas id="chart-teb-by-snr" class="chart"  width="1200" height="480" ></canvas> </center>
	<script>
	    $(function(){
	    	
	    	$("#chart-teb-by-snr").attr("width",($(window).width()-100)+"px");
	    	$("#chart-teb-by-snr").attr("height",($(window).height()-100)+"px");
	    	
	    	
			$.get("data/teb-by-snr.csv?"+Date.now(),function(csv){
				data = parseData(csv);
		    	$('#container').highcharts({
				        title: {
				            text: 'TEB en fonction du SNR',
				            x: -20 //center
				        },
				        subtitle: {
				            text: 'NbEch: 30, NbSymbole : 99999',
				            x: -20
				        },
				        xAxis: {
				            categories: data.labels
				        },
				        yAxis: {
				            title: {
				                text: 'SNR (dB)'
				            },
				            plotLines: [{
				                value: 0,
				                width: 1,
				                color: '#808080'
				            }]
				        },
				        legend: {
				            layout: 'vertical',
				            align: 'right',
				            verticalAlign: 'middle',
				            borderWidth: 0
				        },
				        series: data.series
				    });
				});
		    });
	    	function parseData(csv){
	    		let data = {
	    			labels :  [],
		    		series :  [
				        {
				            name: "TEB en fonction du SNR (Signal RZ)",
				            data: []
				        },
				        {
				            name: "TEB en fonction du SNR (Signal NRZ)",
				            data: []
				        },
				        {
				            name: "TEB en fonction du SNR (Signal NRZT)",
				            data: []
				        }]
	    		};
				csv.split("\n").slice(1, -1).forEach(function (line, index) {
//					if(index == 0 || index == 72) return;
					l = line.split(",");
					data.labels.push(l[0]);
					for (i=1;i<l.length;i++){
						data.series[i-1].data.push(l[i]);
					}
				});
	    		return data;
	    	}
	    });
	</script>
    </body>
</html>
